<div class="card flex justify-content-center align-items-center m-2 overflow-visible">
  <div class="flex flex-column gap-3">
    <form [formGroup]="formGroup" class="flex flex-column gap-3">
      <div class="inline-flex flex-column p-3">

        <div class="inline-flex p-3">
          <div>
          <span class="p-input-filled m-2">
          <input id="name" formControlName="name" type="text" pInputText placeholder="Nombre"
                 class="p-3 border-round-3xl border-0 bg-gray-200">
          </span>
            @if (formGroup.controls['name'].invalid && formGroup.controls['name'].touched) {
              <p *ngIf="formGroup.controls['name'].errors?.required" class="text-red-500 text-xs m-0 ml-3">
                El nombre es obligatorio</p>
              <p *ngIf="formGroup.controls['name'].errors?.minlength" class="text-red-500 text-xs m-0 ml-3">
                El nombre debe tener al menos 3 caracteres</p>
              <p *ngIf="formGroup.controls['name'].errors?.maxlength" class="text-red-500 text-xs m-0 ml-3">
                El nombre debe tener como máximo 50 caracteres</p>
            }
          </div>
          <div>
          <span class="p-input-filled m-2">
          <input id="email" formControlName="email" type="text" pInputText placeholder="Email"
                 class="p-3 border-round-3xl border-0 bg-gray-200">
          </span>
            @if (formGroup.controls['email'].invalid && formGroup.controls['email'].touched) {
              <p *ngIf="formGroup.controls['email'].errors?.required" class="text-red-500 text-xs m-0 ml-3">
                El email es obligatorio</p>
              <p *ngIf="formGroup.controls['email'].errors?.email" class="text-red-500 text-xs m-0 ml-3">
                El email no es válido</p>
            }
          </div>
        </div>

        <div class="inline-flex p-3">
          <div><span class="p-input-filled m-2">
            <input id="username" formControlName="username" type="text" pInputText placeholder="Username"
                   class="p-3 border-round-3xl border-0 bg-gray-200">
          </span>
            @if (formGroup.controls['username'].invalid && formGroup.controls['username'].touched) {
              <p *ngIf="formGroup.controls['username'].errors?.required" class="text-red-500 text-xs m-0 ml-3">
                El username es obligatorio</p>
              <p *ngIf="formGroup.controls['username'].errors?.minlength" class="text-red-500 text-xs m-0 ml-3">
                El username debe tener al menos 3 caracteres</p>
              <p *ngIf="formGroup.controls['username'].errors?.maxlength" class="text-red-500 text-xs m-0 ml-3">
                El username debe tener como máximo 50 caracteres</p>
            }</div>

          <div><span class="p-input-filled m-2">
            <input id="dni" formControlName="dni" type="text" pInputText placeholder="DNI" (input)="validateDNI($event)"
                   class="p-3 border-round-3xl border-0 bg-gray-200">
          </span>
            @if (formGroup.controls['dni'].invalid && formGroup.controls['dni'].touched) {
              <p *ngIf="formGroup.controls['dni'].errors?.required" class="text-red-500 text-xs m-0 ml-3">
                El DNI es obligatorio</p>
              <p *ngIf="formGroup.controls['dni'].errors?.minlength" class="text-red-500 text-xs m-0 ml-3">
                El DNI debe tener 9 caracteres</p>
              <p *ngIf="formGroup.controls['dni'].errors?.maxlength" class="text-red-500 text-xs m-0 ml-3">
                El DNI debe tener 9 caracteres</p>
              <p *ngIf="formGroup.controls['dni'].errors?.incorrect" class="text-red-500 text-xs m-0 ml-3">
                El DNI no es correcto</p>
            }</div>
        </div>

        <div class="inline-flex p-3">
          <div>
            <p-dropdown formControlName="gender" [options]="genders" placeholder="Selecciona un género"
                        styleClass="m-2 mr-4 w-15rem"/>
            @if (formGroup.controls['gender'].invalid && formGroup.controls['gender'].touched) {
              <p *ngIf="formGroup.controls['gender'].errors?.required" class="text-red-500 text-xs m-0 ml-3">
                El género es obligatorio</p>
            }
          </div>

          <div>
            <span class="p-input-filled m-2">
          <input pPassword id="password" formControlName="password" type="password" pInputText placeholder="Password"
                 class="p-3 border-round-3xl border-0 bg-gray-200" (keyup.enter)="saveChanges()">
        </span>
            @if (formGroup.controls['password'].invalid && formGroup.controls['password'].touched) {
              <p *ngIf="formGroup.controls['password'].errors?.required" class="text-red-500 text-xs m-0 ml-3">
                La contraseña es obligatoria</p>
              <p *ngIf="formGroup.controls['password'].errors?.minlength" class="text-red-500 text-xs m-0 ml-3">
                La contraseña debe tener al menos 3 caracteres</p>
              <p *ngIf="formGroup.controls['password'].errors?.maxlength" class="text-red-500 text-xs m-0 ml-3">
                La contraseña debe tener como máximo 50 caracteres</p>
            }
          </div>
        </div>

        <div class="p-3">
          <p-button [label]="label" [rounded]="true" (click)="saveChanges()" styleClass="w-full mt-4"></p-button>
          <p-button label="Cancelar" [rounded]="true" severity="danger" (click)="cancel()"
                    styleClass="w-full mt-4"></p-button>
        </div>
      </div>
    </form>
  </div>
</div>
